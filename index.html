<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>For Keira</title>

  <!-- Cute friendly fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <!-- Waiting Screen -->
  <main id="gate" class="gate hidden">
    <div class="gate-card">

      <div class="gate-icon">
        <div class="heart"></div>
      </div>

      <h1>Open me tomorrow</h1>

      <p class="subtitle">
        This unlocks on Valentine‚Äôs Day
      </p>

      <div class="countdown-box">
        <div class="label">Countdown</div>
        <div id="countdown" class="countdown">‚Äî</div>
      </div>

    </div>
  </main>

  <!-- Main Page -->
  <main id="app" class="app hidden">
    <div class="card">
      <h1>Hi Keira</h1>
      <p>Will you be my Valentine?</p>

      <div class="buttons">
        <button id="yesBtn" class="btn yes">Yes</button>
        <button id="noBtn" class="btn no">No</button>
      </div>

      <div id="response" class="response"></div>
    </div>
  </main>

  <script>
    const UNLOCK_AT = new Date("2026-02-14T00:00:00+10:00");
    const BYPASS_KEY = "/";

    const gateEl = document.getElementById("gate");
    const appEl = document.getElementById("app");
    const countdownEl = document.getElementById("countdown");

    function pad(n){ return String(n).padStart(2,"0"); }

    function showGate(){
      gateEl.classList.remove("hidden");
      appEl.classList.add("hidden");
      updateCountdown();
    }

    function showApp(){
      gateEl.classList.add("hidden");
      appEl.classList.remove("hidden");
    }

    function updateCountdown(){
      const t = UNLOCK_AT - new Date();
      if(t <= 0){ showApp(); return; }

      const s = Math.floor(t/1000);
      const d = Math.floor(s/86400);
      const h = Math.floor((s%86400)/3600);
      const m = Math.floor((s%3600)/60);
      const sec = s%60;

      countdownEl.textContent = `${d}d ${pad(h)}:${pad(m)}:${pad(sec)}`;
      setTimeout(updateCountdown, 250);
    }

    function enableBypass(){
      showApp();
      try { sessionStorage.setItem("val_bypass","1"); } catch(_) {}
    }

    document.addEventListener("keydown", (e)=>{
      if(e.key === BYPASS_KEY) enableBypass();
    });

    const bypassed = (() => {
      try { return sessionStorage.getItem("val_bypass") === "1"; }
      catch(_) { return false; }
    })();

    if(bypassed || new Date() >= UNLOCK_AT) showApp();
    else showGate();

    // Buttons
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const response = document.getElementById("response");

    const prompts = [
      "Are you sure?",
      "Try that again üôÇ",
      "That seems unlikely",
      "One more time",
      "Will you be my Valentine?"
    ];

    let noCount = 0;

    noBtn.addEventListener("click", ()=>{
      noCount++;
      response.textContent = prompts[Math.min(noCount-1, prompts.length-1)];

      yesBtn.style.transform = `scale(${1 + noCount * 0.15})`;
      noBtn.style.transform = `scale(${1 - noCount * 0.07})`;
    });

    yesBtn.addEventListener("click", ()=>{
      response.textContent = "Best answer ever ‚ù§Ô∏è";
    });
  </script>

</body>
</html>